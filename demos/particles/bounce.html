<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Particles</title>
	<style type="text/css">

		body {margin:0; padding:0; background:#000; overflow:hidden;}
		canvas {}

	</style>
	<script type="text/javascript">

		var canvas, ctx;
		var particles = [];
		var N = 100;
		var g = 0.15;

		function Particle() {
			this.x  = Math.random() * canvas.width;
			this.y  = 0;//Math.random() * canvas.height;
			this.vx = Math.random() * 4 - 2;
			this.vy = Math.random() * 4 - 2;
			this.e  = 0.5 + Math.random() * 0.4;
		}

		Particle.prototype.update = function() {
			this.x  += this.vx;
			this.y  += this.vy;
			this.vy += g;

			if (this.x > canvas.width || this.x < 0) {
				this.vx = -this.vx;
			}
			if (this.y > canvas.height) {
				this.y = canvas.height;
				this.vy = -this.vy * this.e;
				this.vx *= this.e;
				this.e -= 0.05;
				if (this.e <= 0) {
					this.e = 0;
					this.vx = 0;
					this.vy = 0;
					this.y = canvas.height;
				}
			}
		}

		function draw() {
			ctx.clearRect(0, 0, canvas.width, canvas.height);

			for (var i=0; i<N; i++) {
				particles[i].update();

				ctx.beginPath();
				ctx.moveTo(particles[i].x, particles[i].y);
				ctx.lineTo(particles[i].x - particles[i].vx, particles[i].y - particles[i].vy);
				ctx.stroke();
				ctx.closePath();
			}

			requestAnimationFrame(draw);
		}

		function init() {
			canvas = document.createElement("canvas");
			canvas.width = window.innerWidth;
			canvas.height = window.innerHeight;
			document.body.appendChild(canvas);
			ctx = canvas.getContext("2d");

			for (var i=0; i<N; i++) {
				particles[i] = new Particle();
			}

			ctx.lineWidth = "4";
			ctx.strokeStyle = "rgb(255, 255, 255)";
			draw();
		}

		window.onload = init;

	</script>
</head>
<body>
</body>
</html>
