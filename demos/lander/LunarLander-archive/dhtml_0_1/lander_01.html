<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd"><html lang="en"><head><title>lunar Lander (dhtml)</title><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="generator" content="BBEdit 6.5.2"><script type="text/javascript" language="javascript">// ------------------------------------------------------------//// Lunar Lander 0.1// Geoff Pack, geoff@virtualgeoff.com//// v0.1, August 2004// this version: basic physics, controls//// ------------------------------------------------------------// load images and sound:if (document.images) {    engineOn  = new Image(); engineOn.src  = "iamges/lander_on.gif";    engineOff = new Image(); engineOff.src = "iamges/lander_off.gif";}// ------------------------------------------------------------// get screen size:var W = 600;var H = 400;// ------------------------------------------------------------// lander variables:var px = 0+20;		// positionvar py = H-20;var vx = 10;		// velocityvar vy = 0;var ax = 0;			// accelerationvar ay = 0;var f  = 0;			// thrustvar fx = 0;			var fy = 0;var m  = 1;			// massvar theta = 0;		// orientationvar h = 14;			// height of lander cg from base of legsvar g = -0.5;		// acceleration due to gravity	// ------------------------------------------------------------// animation loop:function updatePostion() {	// calculate thrust components:	// only really need to do if (f != 0), but avoid the conditional	fx = f * Math.sin(theta*Math.PI/180);  // convert degrees to radians	fy = f * Math.cos(theta*Math.PI/180);	// euler integration:	ax = fx/m;	ay = fy/m + g;	vx += ax;	vy += ay;	px += vx;	py += vy;	// detect collision with ground:	if (py <= h) {		py = h;		vx = 0;		vy = 0;				// if velocity is low >> landing		// else crash!	} else if (py > (H-h)) {		// bounce of ceiling		py = H-h;		vy = - vy/2;	}	// wrap left and right edges:	if (px > W) px -= W;	else if (px < 0) px += W;		// draw lander and HUD:	drawLander();	drawDisplay();        // do it all again in 50 millisecs (~20 fps):    next = setTimeout("updatePostion()",50);}// ------------------------------------------------------------// drawing functions:function drawLander() {	var d = document.getElementById('lander'); 	d.style.left = (px-50) + 'px';	d.style.top  = (H-py-50) + 'px';}function drawDisplay() {	document.getElementById('position').innerHTML 		= "<pre>Altitude:     " + parseInt(py-h) + "<\/pre>";	document.getElementById('velocity').innerHTML 		= "<pre>Velocity:     " + parseInt(vx*10)/10 +", " + parseInt(vy*10)/10 + "<\/pre>";	//document.getElementById('acceleration').innerHTML 	= "<pre>Acceleration: " + parseInt(10*ax)/10 +", " + parseInt(10*ay)/10 + "<\/pre>";	//document.getElementById('orientation').innerHTML 	= "<pre>Orientation:  " + theta + " degrees<\/pre>";}// ------------------------------------------------------------// keypress handlers:function thrust(T) {	// originally resolved thrust components here (i.e. when thrust is changed),	// but this causes problems if orientation changed while engine kept on. So:	f = T;	// swap image if thrust changes 	if (f==0) document.landerImg.src = "images/lander_off.gif";	else      document.landerImg.src = "images/lander_on.gif";}	function rotate(w) {	// increment angle:	theta += w;	// limit angle to between 0 and 360 degrees:	if (theta >= 360) theta -= 360;	if (theta < 0) theta += 360;		// move landerImg to display correct subimage:	var d = document.getElementById('landerImg'); 	d.style.left = -100*((theta-(parseInt(theta/90))*90)/15) + 'px';	d.style.top = -100*parseInt(theta/90) + 'px';}// ------------------------------------------------------------// keypress detection code:var NS = (window.Event) ? 1 : 0;function checkKey(e) {	var code = (NS) ? e.which : event.keyCode;	var key = String.fromCharCode(code);		if      (key == ' ') thrust(2); 	else if (key == ',') rotate(-15);	else if (key == '.') rotate(+15);}function checkKeyUp(e) {	var code = (NS) ? e.which : event.keyCode;	var key = String.fromCharCode(code);	if (key == ' ') thrust(0);	}if (NS) document.captureEvents(Event.KEYPRESS)document.onkeypress = checkKey;document.onkeyup = checkKeyUp;// ------------------------------------------------------------// get going!:function init() {	drawLander();	drawDisplay();	updatePostion();}// ------------------------------------------------------------</script><style type="text/css">body {}#content {	position:absolute; left:0px; top:0px; background-color:#000;	margin:auto;	width:600px;	height:400px;	overflow:hidden;}#lander {	position:absolute; 	z-index:6; 	left:0px; top:0px; width:100px; height:100px; 	overflow:hidden;}#landerImg {	position:absolute; 	left:0px; top:0px;}#position		{position:absolute; z-index:1; left:10px; top:20px; color:#f00;}#velocity 		{position:absolute; z-index:2; left:10px; top:40px; color:#0f0;}#acceleration	{position:absolute; z-index:3; left:10px; top:60px; color:#00f;}#orientation	{position:absolute; z-index:4; left:10px; top:80px; color:#f0f;}</style></head><body onload="init();"><div id="content">	<div id="lander"><img name="landerImg" id="landerImg" src="images/lander_off.gif" alt="lander image" width="600" height="400"></div>	<div id="position"></div>	<div id="velocity"></div>	<div id="acceleration"></div>	<div id="orientation"></div></div></body></html>