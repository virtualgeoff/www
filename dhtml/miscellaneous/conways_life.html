<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">

<html lang="en">
<head>
<title>Conway's Game of Life</title>
<script type="text/javascript">

var board = new Array(); // 2D array to hold blocks [x][y]
var boardWidth = 100;
var boardHeight = 40;
var k = 0;

function initialiseBoard() {
	// write empty table to hold blocks
	for (var x=0; x<boardWidth; x++) {
		board[x] = new Array();
		for (var y=0; y<boardHeight; y++) {
			board[x][y] = new Array();
			board[x][y][0] = Math.floor(Math.random()*2);
		}
	}
	updateBoard();
}

function updateBoard() {	
	var str = '';
	for (var y=boardHeight-1; y>=0; y--) {
		for (var x=0; x<boardWidth; x++) {
			//str += board[x][y][0];
			if (board[x][y][0] == 1) str += '0';
			else str += '&middot;';
		}
		str += '<br>';
	}
	document.getElementById('gameBoard').innerHTML = '<pre>' + str +  '</pre>';
}

function getNeighbours(x,y) {
	var N = 0;
	var J, K;
	for (var j=x-1; j<=x+1; j++) {
		J = j;
		if (j<0) J = boardWidth-1; //wrap around
		if (j>boardWidth-1) J = 0; //wrap around
		for (var k=y-1; k<=y+1; k++) {
			K = k;
			if ((j==x) && (k==y)) continue;// skip the cell itself
			if (k<0) K = boardHeight-1; //wrap around
			if (k>boardHeight-1) K = 0; //wrap around
		
			N += board[J][K][0];
		}
	}
	return N;
}

function main() {
	for (var x=0; x<boardWidth; x++) {
		for (var y=0; y<boardHeight; y++) {
			board[x][y][1] = getNeighbours(x,y);
		}
	}

	for (var x=0; x<boardWidth; x++) {
		for (var y=0; y<boardHeight; y++) {
			// Rules for Conway's Life:
			// 1. If a cell has one or no living neighbours, it will die of loneliness.
			// 2. If it has too many neighbours - four or more - it will die from overcrowding.
			// 3. New cells are "born" whenever an empty square has exactly three living neighbors.
			if (board[x][y][0] == 1) {
				if      (board[x][y][1] <= 1) board[x][y][0] = 0;
				else if (board[x][y][1] >= 4) board[x][y][0] = 0;
				else    board[x][y][0] = 1;
			} else {
				// empty cell
				if (board[x][y][1] == 3) board[x][y][0] = 1;
			}
			board[x][y][1] = 0;
		}
	}
	updateBoard()
}

function init() {
	initialiseBoard();
	window.setInterval(main,20);
}

window.onload = init;

</script>
</head>
<body>

<h1>Conway's Game of Life</h1>
<p>Reload to start again. Initial values are random. More info <a href="http://en.wikipedia.org/wiki/Conway's_Game_of_Life">here</a>.</p>

<div id="gameBoard"></div>

</body>
</html>
