<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>JavaScript 3D</title>
<style type="text/css">
body {background:#fff;}
</style>

<script type="text/javascript" src="shapes1.js"></script>
<script type="text/javascript" src="matrix.js"></script>
<script type="text/javascript" src="wz_jsgraphics.js"></script>

<script language="javascript">
var x_offset = 500;
var y_offset = 50;
var distance = 250;
var angle = 0;


function render(shape, canvas)
{
	var view = new Matrix();
	view.setPerspective(distance);
	var edges = shape.getEdges();
	for (var i=0; i<edges.length; i++)
	{
		var points = edges[i].getPoints();
		p1 = points[0].getCoord(2);
		p2 = points[1].getCoord(2);
		p1 = view.multiply1(p1);
		p1 = normalize(p1, 3);
		p2 = view.multiply1(p2);
		p2 = normalize(p2, 3);
		canvas.drawLine(
			p1[0] + x_offset,
			p1[1] + y_offset,
			p2[0] + x_offset,
			p2[1] + y_offset	
		);
	}
	return canvas;
}


function animateCube(canvas)
{
	angle += 0.1;
	if (angle >= 6.24)
		angle = 0;
	var c = new Cube(150);
	r0 = new Matrix();
	r0.setTranslation(new Array(0, 30, 0))
	
	r = new Matrix();
	r.setRotation(new Array(0, 1, 0, angle));
	var pr = r.multiply4(r0);

	var d = c.transform(pr);
	canvas.clear();
	render(d, canvas);
	canvas.paint();
	timer = setTimeout('animateCube(canvas)', 50);
}



function showCube(canvas, transformation)
{
	var c = new Cube(40);
	var d = c.transform(transformation);
	render(d, canvas);
	return canvas;
}


function showCoordSystem(canvas, transformation)
{
	var c = new Cube(40);
	var d = c.transform(transformation);
	render(d, canvas);
	return canvas;
}





</script>
</head>

<body>

<div id="screen" style="width:400px; height:400px; background:#ccc; border:1px dotted #000;">
<p>Draw here...</p>

</div>

<p>code from:<br>
<a href="http://hem.spray.se/vilius/js3Dtutor.html">hem.spray.se/vilius/js3Dtutor.html</a><br>
<a href="http://www.walterzorn.com/jsgraphics/jsgraphics_e.htm">www.walterzorn.com/jsgraphics/jsgraphics_e.htm</a>
</p>

<script language="javascript">
var canvas = new jsGraphics("screen");	

//Fig. 5
c = new Cube(100);
var x_offset = 200;
var y_offset = 200;
canvas.setColor("#000");
canvas = render(c, canvas);
t = new Matrix();
t.setTranslation(new Array(60, 0, 0));
r = new Matrix();
r.setRotation(new Array(0, 0, -1, Math.PI/5));
pr = r.multiply4(t);

c = new Cube(160);
c = c.transform(pr);
canvas.setColor("#009");
canvas = render(c, canvas);

var cs = new CoordSystem(100, null);
canvas.setColor("#900");
canvas = render(cs, canvas);
canvas.paint();

animateCube(canvas);

</script>

</body>
</html>
