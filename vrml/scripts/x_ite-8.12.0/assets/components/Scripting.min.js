/* X_ITE v8.12.0 */(()=>{"use strict";var e={355:e=>{e.exports=window[Symbol.for("X_ITE.X3D-8.12.0")].require("lib/jquery")}},t={};function o(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,o),n.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Components");var t=o.n(e);const r=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Base/X3DBaseNode");var i=o.n(r);const n=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Base/X3DFieldDefinition");var a=o.n(n);const s=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Base/FieldDefinitionArray");var l=o.n(s);const c=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Base/X3DField");var u=o.n(c);const d=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Base/X3DArrayField");var p=o.n(d);const f=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Fields");var v=o.n(f);const S=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Browser/X3DBrowser");var _=o.n(S);const w=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Configuration/ComponentInfo");var y=o.n(w);const F=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Configuration/ComponentInfoArray");var h=o.n(F);const m=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Configuration/ProfileInfo");var X=o.n(m);const D=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Configuration/ProfileInfoArray");var g=o.n(D);const x=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Configuration/ConcreteNodesArray");var b=o.n(x);const E=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Configuration/AbstractNodesArray");var I=o.n(E);const T=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Configuration/UnitInfo");var M=o.n(T);const N=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Configuration/UnitInfoArray");var A=o.n(N);const O=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Execution/NamedNodesArray");var q=o.n(O);const C=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Execution/ImportedNodesArray");var P=o.n(C);const V=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Execution/X3DImportedNode");var B=o.n(V);const j=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Execution/ExportedNodesArray");var R=o.n(j);const U=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Execution/X3DExportedNode");var z=o.n(U);const L=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Execution/X3DExecutionContext");var k=o.n(L);const G=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Execution/X3DScene");var $=o.n(G);const H=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Prototype/ExternProtoDeclarationArray");var J=o.n(H);const W=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Prototype/ProtoDeclarationArray");var K=o.n(W);const Q=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Prototype/X3DExternProtoDeclaration");var Y=o.n(Q);const Z=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Prototype/X3DProtoDeclaration");var ee=o.n(Z);const te=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Prototype/X3DProtoDeclarationNode");var oe=o.n(te);const re=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Routing/RouteArray");var ie=o.n(re);const ne=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Routing/X3DRoute");var ae=o.n(ne);const se=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Namespace");var le=o.n(se);const ce=function(e,t,o){return Function("with (arguments [0])\n   {\n      return eval ((() =>\n      {\n         const sourceText = arguments [1];\n\n         delete arguments [0];\n         delete arguments [1];\n\n         arguments .length = 0;\n\n         return sourceText;\n      })\n      ());\n   }").call(e,t,o)};le().add("evaluate","x_ite/Browser/Scripting/evaluate",ce);const ue=ce,de=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Components/Core/X3DChildNode");var pe=o.n(de);const fe=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Components/Networking/X3DUrlObject");var ve=o.n(fe);const Se=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Base/X3DConstants");var _e=o.n(Se);function we(e){pe().call(this,e),ve().call(this,e),this.addType(_e().X3DScriptNode)}Object.assign(Object.setPrototypeOf(we.prototype,pe().prototype),ve().prototype,{initialize(){pe().prototype.initialize.call(this),ve().prototype.initialize.call(this)},dispose(){ve().prototype.dispose.call(this),pe().prototype.dispose.call(this)}}),Object.defineProperties(we,{typeName:{value:"X3DScriptNode",enumerable:!0},componentName:{value:"Scripting",enumerable:!0}});const ye=we;le().add("X3DScriptNode","x_ite/Components/Scripting/X3DScriptNode",ye);const Fe=ye,he=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/InputOutput/FileLoader");var me=o.n(he);const Xe=window[Symbol.for("X_ITE.X3D-8.12.0")].require("x_ite/Fields/SFNodeCache");var De=o.n(Xe),ge=o(355);function xe(e){Fe.call(this,e),this.addType(_e().Script)}Object.assign(Object.setPrototypeOf(xe.prototype,Fe.prototype),{initialize(){Fe.prototype.initialize.call(this),this.requestImmediateLoad().catch(Function.prototype)},getExtendedEventHandling:()=>!1,canUserDefinedFields:()=>!0,addUserDefinedField(e,t,o){Fe.prototype.addUserDefinedField.call(this,e,t,o),this.isInitialized()&&(this.setLoadState(_e().NOT_STARTED_STATE),this.requestImmediateLoad().catch(Function.prototype))},removeUserDefinedField(e){this.getUserDefinedFields().get(e)?.removeInterest("set_field__",this),Fe.prototype.removeUserDefinedField.call(this,e),this.isInitialized()&&(this.setLoadState(_e().NOT_STARTED_STATE),this.requestImmediateLoad().catch(Function.prototype))},getSourceText(){return this._url},unloadData(){this.initialize__("")},loadData(){new(me())(this).loadDocument(this._url,(e=>{null===e?this.setLoadState(_e().FAILED_STATE):(this.initialize__(ge.decodeText(e)),this.setLoadState(_e().COMPLETE_STATE))}))},createGlobalObject(){const e=this.getBrowser();function t(t){const o=e.createVrmlFromString(t);if(o.length&&o[0])return o[0];throw new Error("SFNode.new: invalid argument.")}t.prototype=v().SFNode.prototype;const o={NULL:{value:null},FALSE:{value:!1},TRUE:{value:!0},print:{value:e.println.bind(e)},trace:{value:e.println.bind(e)},Browser:{value:e},X3DConstants:{value:_e()},X3DBrowser:{value:_()},X3DExecutionContext:{value:k()},X3DScene:{value:$()},ComponentInfo:{value:y()},ComponentInfoArray:{value:h()},ProfileInfo:{value:X()},ProfileInfoArray:{value:g()},ConcreteNodesArray:{value:b()},AbstractNodesArray:{value:I()},UnitInfo:{value:M()},UnitInfoArray:{value:A()},NamedNodesArray:{value:q()},ImportedNodesArray:{value:P()},X3DImportedNode:{value:B()},ExportedNodesArray:{value:R()},X3DExportedNode:{value:z()},ExternProtoDeclarationArray:{value:J()},ProtoDeclarationArray:{value:K()},X3DExternProtoDeclaration:{value:Y()},X3DProtoDeclaration:{value:ee()},X3DProtoDeclarationNode:{value:oe()},RouteArray:{value:ie()},X3DRoute:{value:ae()},X3DBaseNode:{value:i()},X3DFieldDefinition:{value:a()},FieldDefinitionArray:{value:l()},X3DField:{value:u()},X3DArrayField:{value:p()},SFColor:{value:v().SFColor},SFColorRGBA:{value:v().SFColorRGBA},SFImage:{value:v().SFImage},SFMatrix3d:{value:v().SFMatrix3d},SFMatrix3f:{value:v().SFMatrix3f},SFMatrix4d:{value:v().SFMatrix4d},SFMatrix4f:{value:v().SFMatrix4f},SFNode:{value:t},SFRotation:{value:v().SFRotation},SFString:{value:v().SFString},SFVec2d:{value:v().SFVec2d},SFVec2f:{value:v().SFVec2f},SFVec3d:{value:v().SFVec3d},SFVec3f:{value:v().SFVec3f},SFVec4d:{value:v().SFVec4d},SFVec4f:{value:v().SFVec4f},VrmlMatrix:{value:v().VrmlMatrix},MFBool:{value:v().MFBool},MFColor:{value:v().MFColor},MFColorRGBA:{value:v().MFColorRGBA},MFDouble:{value:v().MFDouble},MFFloat:{value:v().MFFloat},MFImage:{value:v().MFImage},MFInt32:{value:v().MFInt32},MFMatrix3d:{value:v().MFMatrix3d},MFMatrix3f:{value:v().MFMatrix3f},MFMatrix4d:{value:v().MFMatrix4d},MFMatrix4f:{value:v().MFMatrix4f},MFNode:{value:v().MFNode},MFRotation:{value:v().MFRotation},MFString:{value:v().MFString},MFTime:{value:v().MFTime},MFVec2d:{value:v().MFVec2d},MFVec2f:{value:v().MFVec2f},MFVec3d:{value:v().MFVec3d},MFVec3f:{value:v().MFVec3f},MFVec4d:{value:v().MFVec4d},MFVec4f:{value:v().MFVec4f}};for(const e of this.getUserDefinedFields()){const t=e.getName();e.getAccessType()!==_e().inputOnly&&(t in o||(o[t]={get:e.valueOf.bind(e),set:e.setValue.bind(e)}),e.getAccessType()===_e().inputOutput&&(o[t+"_changed"]={get:e.valueOf.bind(e),set:e.setValue.bind(e)}))}return Object.create(Object.prototype,o)},createContext(e){try{const t=["initialize","prepareEvents","eventsProcessed","shutdown"];for(const e of this.getUserDefinedFields())switch(e.getAccessType()){case _e().inputOnly:t.push(e.getName());break;case _e().inputOutput:t.push("set_"+e.getName())}e+=";\n["+t.map((e=>`typeof ${e} !== "undefined" ? ${e} : undefined`)).join(",")+"];";const o=this.evaluate(e),r=new Map;for(let e=0;e<t.length;++e)r.set(t[e],o[e]);return r}catch(e){return this.setError("while evaluating script source",e),new Map}},evaluate(e){const t=this.getBrowser();try{return t.getScriptStack().push(this),this.globalObject||(this.globalObject=this.createGlobalObject()),ue(De().get(this),this.globalObject,e)}finally{t.getScriptStack().pop()}},initialize__(e){this.disconnect();const t=this.getBrowser();this.globalObject=this.createGlobalObject(),this.context=this.createContext(e);const o=this.context.get("shutdown");"function"==typeof o&&ge(window).on("unload.Script"+this.getId(),this.call__.bind(this,o,"shutdown"));const r=this.context.get("prepareEvents");"function"==typeof r&&t.prepareEvents().addInterest("call__",this,r,"prepareEvents");const i=this.context.get("eventsProcessed");"function"==typeof i&&this.addInterest("call__",this,i,"eventsProcessed");for(const e of this.getUserDefinedFields())switch(e.getAccessType()){case _e().inputOnly:{const t=this.context.get(e.getName());"function"==typeof t&&e.addInterest("set_field__",this,t);break}case _e().inputOutput:{const t=this.context.get("set_"+e.getName());"function"==typeof t&&e.addInterest("set_field__",this,t);break}}const n=this.context.get("initialize");"function"==typeof n&&this.call__(n,"initialize")},call__(e,t){const o=this.getBrowser();o.getScriptStack().push(this);try{e.call(De().get(this),o.getCurrentTime())}catch(e){this.setError(`in function '${t}'`,e)}o.getScriptStack().pop()},set_field__(e,t){const o=this.getBrowser();t.setTainted(!0),o.getScriptStack().push(this);try{e.call(De().get(this),t.valueOf(),o.getCurrentTime())}catch(e){this.setError("in function '"+t.getName()+"'",e)}o.getScriptStack().pop(),t.setTainted(!1)},setError(e,t){console.error("JavaScript Error in Script '"+this.getName()+"', "+e+"\nworld url is '"+this.getExecutionContext().getWorldURL()+"':"),console.error(t)},disconnect(){const e=this.context?.get("shutdown");"function"==typeof e&&this.call__(e,"shutdown"),ge(window).off(".Script"+this.getId()),this.getBrowser().prepareEvents().removeInterest("call__",this),this.removeInterest("call__",this);for(const e of this.getUserDefinedFields())e.removeInterest("set_field__",this)},dispose(){this.disconnect(),Fe.prototype.dispose.call(this)}}),Object.defineProperties(xe,{typeName:{value:"Script",enumerable:!0},componentName:{value:"Scripting",enumerable:!0},containerField:{value:"children",enumerable:!0},specificationRange:{value:Object.freeze(["2.0","Infinity"]),enumerable:!0},fieldDefinitions:{value:new(l())([new(a())(_e().inputOutput,"metadata",new(v().SFNode)),new(a())(_e().inputOutput,"description",new(v().SFString)),new(a())(_e().inputOutput,"load",new(v().SFBool)(!0)),new(a())(_e().inputOutput,"url",new(v().MFString)),new(a())(_e().inputOutput,"autoRefresh",new(v().SFTime)),new(a())(_e().inputOutput,"autoRefreshTimeLimit",new(v().SFTime)(3600)),new(a())(_e().initializeOnly,"directOutput",new(v().SFBool)),new(a())(_e().initializeOnly,"mustEvaluate",new(v().SFBool))]),enumerable:!0}});const be=xe;le().add("Script","x_ite/Components/Scripting/Script",be);const Ee=be;t().add({name:"Scripting",concreteNodes:[Ee],abstractNodes:[Fe]});const Ie=void 0;le().add("Scripting","assets/components/Scripting",Ie)})()})();